<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="http://pubnub.github.io/eon/v/eon/0.0.10/eon.js"></script>
    <link type="text/css" rel="stylesheet" href="http://pubnub.github.io/eon/v/eon/0.0.10/eon.css"/>
    <script src="bower_components/d3/d3.min.js"></script>
    <script src="bower_components/c3/c3.min.js"></script>
    <script src="bower_components/pubnub-c3.js"></script>
    <style>
        .c3-region-1 {
            fill: #dd3333;
            fill-opacity: 0.8
        }
    </style>

</head>
<body>
<div id="chart"></div>
<script>
    var channel_name=sessionStorage.getItem("channel_id")
    console.log("channel name is: "+channel_name)
    eon.chart({
        history: true,
        channel: channel_name,
        flow: true,
        generate: {
            bindto: '#chart',
            data: {
                x: 'x',
                labels: false
            },
            axis : {
                x : {
                    type : 'timeseries',
                    tick: {
                        format: '%H:%M:%S'
                    }
                }
            }
        }
    });
    var pubnub = PUBNUB.init({
        publish_key: 'demo',
        subscribe_key: 'demo'
    });

    /*
    setInterval(function(){

        pubnub.publish({
            channel: channel,
            message: {
                eon: {
                    'Austin': Math.floor(Math.random() * 99),
                    'New York': Math.floor(Math.random() * 99),
                    'San Francisco': Math.floor(Math.random() * 99),
                    'Portland': Math.floor(Math.random() * 99)
                }
            }
        });

    }, 1000);*/

</script>
</body>
</html>